---

import Layout from '../../layouts/Layout.astro';

import { getPages, getPage, getProducts, getProduct, getPageById } from "../../lib/api.js";
import Slider from '../../components/slider.vue';


const { lang } = Astro.params;
const page = await getPage('home' , lang);
const seo = page?.yoast_head_json ?? null;
// console.log(page);


const slide = page?.acf?.slide;
const text = page?.acf?.centered_text;

const colorText = "#eee9e3";
const bgHeader = "bg-transparent";
---

<Layout lang={lang} page={page} getById={getPageById} seo={seo} slug="home"  colorText={colorText} bgHeader={bgHeader}>

	<Slider client:load
		slides={slide},
		text={text}
		class="w-full h-screen overflow-hidden"
	/>
	<script is:inline>
  document.addEventListener('click', (e) => {
    if (!/iPad|iPhone|iPod/.test(navigator.userAgent)) return false;
    const target = e.target;
    const link = target.closest('a');
    const shouldPushState = link && link.href && link.href.startsWith(window.location.origin) && !link.href.includes('#');
    if (!shouldPushState) return;
    history.pushState(null, '', link.href);
    window.dispatchEvent(new PopStateEvent('popstate'));
  });
</script>
</Layout>
